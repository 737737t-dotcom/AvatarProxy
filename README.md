# AvatarProxy (C++)

TCP-прокси для анализа и исследования игрового сетевого трафика с поддержкой бинарного протокола.

## О проекте

AvatarProxy — это инструмент для реверс-инженеринга сетевого протокола игры.  
Прокси перехватывает TCP-соединения между клиентом и сервером, выполняет разбор бинарных пакетов и логирует их содержимое.

## Возможности

- Многопоточная обработка клиентских соединений  
- Парсинг бинарного протокола:
  - LZ4-декомпрессия
  - CRC32-валидация
  - поддержка базовых типов данных
- Логирование пакетов клиента и сервера
- Низкоуровневый контроль сетевых операций

## Сборка

### Автоматически
```bash
./start.sh
```

### Вручную
```bash
mkdir build && cd build
cmake ..
make
```

## Запуск

```bash
./start.sh
```

По умолчанию прокси слушает на `0.0.0.0:8123` и форвардит соединения на игровой сервер.

## Настройка

Основные параметры настраиваются в `main.cpp`:

- `listen_address` — адрес, на котором работает прокси  
- `remote_address` — адрес игрового сервера  
- `log_client_packets` — логирование пакетов от клиента  
- `log_server_packets` — логирование пакетов от сервера  

## Структура проекта

```
src/
├── network/
│   ├── proxy_server.h    — интерфейс TCP-прокси
│   └── proxy_server.cpp  — реализация прокси
├── protocol/
│   ├── packet_parser.h   — интерфейс парсера пакетов
│   └── packet_parser.cpp — реализация парсинга
└── utils/                — вспомогательные утилиты
```

## Зависимости

- CMake 3.16+
- Boost (system)
- LZ4
- pthread

## Дисклеймер

Проект предназначен исключительно для ознакомления с принципами работы серверной части игры и анализа сетевого протокола.  
Использование осуществляется на ваш страх и риск.

## Лицензия

MIT © infocity
